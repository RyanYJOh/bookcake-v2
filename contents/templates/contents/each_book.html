{% extends 'main/base.html' %}

{% load static %}

{% block extrahead %}
<meta property="og:image" content="{{book.cover.url}}" /> 
<meta property="og:description" content="ì´ ì±…ì´ ë” ê¶ê¸ˆí•˜ë‹¤ë©´?" /> 
{% endblock %}

{% block title %} ì±…í•œì¡°ê° {% endblock %}

{% block content %}
<div class="row-h-40"></div>
<!-- Header -->
<div class="row">
    <div class="col">
        <span class="link" onclick="history.back()"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-compact-left" viewBox="0 0 16 16">
            <path fill-rule="evenodd" d="M9.224 1.553a.5.5 0 0 1 .223.67L6.56 8l2.888 5.776a.5.5 0 1 1-.894.448l-3-6a.5.5 0 0 1 0-.448l3-6a.5.5 0 0 1 .67-.223z"/>
            </svg>ë’¤ë¡œ</span>
    </div>
</div>

<!-- Introduction -->
<div class="row justify-content-center">
    <div class="col-8 col-md-3">
        <img class='img-detail' src='{{book.cover.url}}'>
    </div>
    <div class="col col-9 pc-only">
        <div class="row">
            <div class="col text-l bolder">
                <span class="text-l bolder">{{book.title}}</span>&nbsp;&nbsp;<span class="text-s light">by {{book.author}}</span>
            </div>
        </div>
        <br>

        <div class="row">
            <div class="col">
                <span class='bolder'>[í•œì¤„ í‰]</span><br> {{book.rcmnd_introduction|safe}}
            </div>
        </div>
        <div class="row">
            <div class="col">
                <span class='bolder'>[ì¶”ì²œ ëŒ€ìƒ]</span><br> {{book.rcmnd_whom|safe}}
            </div>
        </div>
        <div class="row">
            <div class="col">
                <span class='bolder'>[ë‘ê»˜]</span><br> {{book.rcmnd_thickness|safe}}
            </div>
        </div>

        <div class="row">
            <div class="col right">
                <button class='btn btn-secondary' onclick="PurchaseModal()" >ë¡œì¼“ìœ¼ë¡œ ì±… êµ¬ë§¤í•˜ê¸°</button>
            </div>
        </div>
    </div>
    <div class="col col-10 mobile-only">
        <div class="row">
            <div class="col center text-l bolder">
                <span class="text-l bolder">{{book.title}}</span>&nbsp;&nbsp;<span class="text-s light">by {{book.author}}</span>
            </div>
        </div>
        <br>

        <div class="row">
            <div class="col">
                <span class='bolder'>[í•œì¤„ í‰]</span><br> {{book.rcmnd_introduction|safe}}
            </div>
        </div>
        <div class="row">
            <div class="col">
                <span class='bolder'>[ì¶”ì²œ ëŒ€ìƒ]</span><br> {{book.rcmnd_whom|safe}}
            </div>
        </div>
        <div class="row">
            <div class="col">
                <span class='bolder'>[ë‘ê»˜]</span><br> {{book.rcmnd_thickness|safe}}
            </div>
        </div>
    </div>
    <div class="col col-12 center mobile-only">
        <br>
        <button class='btn btn-secondary' id="btn-rocket-purchase" onclick="PurchaseModal()" >ë¡œì¼“ìœ¼ë¡œ ì±… êµ¬ë§¤í•˜ê¸°</button>
    </div>
</div>

<div class="row-h-40 pc-only"></div>

<!-- ì„œí‰ -->
<div class="row">
    <div class="col">
        {% if book.is_rcmnded %}
        <button onclick="location.href='{{book.review_url}}'"class='btn btn-primary btn-book'>âœ ì±… ë¦¬ë·° ì½ìœ¼ëŸ¬ ê°€ê¸°</button>
        {% else %}
        <button onclick="" class='btn btn-disabled btn-book'>ğŸ˜´ ì±… ë¦¬ë·°..ëŠ” ì‘ì„±ì¤‘!</button>
        {% endif %}
    </div>
</div>

<div class="row-h-40"></div>

<!-- ì¡°ê°ë“¤ -->
<div class="row">
    <div class="col">
        <div class="row">
            <div class="col text-l bolder pc-only">
                ğŸ° <{{book.title}}> ì¡°ê°ë“¤
                <div class="row-h-20"></div>
            </div>
            <div class="col text-m bolder mobile-only">
                ğŸ° <{{book.title}}> ì¡°ê°ë“¤
            </div>
        </div>
        <div class="row">
            {% if cake_exists %}
            {% for c in cakes %}
            <div class="col-12 col-md-6">
                <div class="row">
                    <div class="col">
                        <img class='img-cake-list link' onclick="location.href='/cake/{{c.pk}}'" src="{{c.image.url}}">
                    </div>
                </div>
                <div class="row-h-20"></div>
            </div>
            {% endfor %}
            {% elif not cake_exists %}
            <div class="col center">
                ì•„ì§ ì´ ì±…ì˜ ì¡°ê°ë“¤ì´ ì—†ì–´ìš” ğŸ•³
            </div>
            {% endif %}
        </div>
    </div>
</div>

<!-- êµ¬ë§¤ ëª¨ë‹¬ -->
<div class="modal fade" tabindex="-1" role="dialog" id="purchase-modal">
    <div class="modal-dialog" role="document">
    <div class="modal-content">
        <div class="modal-header">
        <div class="modal-title text-l">ğŸ“š ì±…ì´ ë§ˆìŒì— ë“¤ì—ˆë‹¤ë©´</div>
        <span type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-lg" viewBox="0 0 16 16">
                <path fill-rule="evenodd" clip-rule="evenodd" d="M13.854 2.146a.5.5 0 0 1 0 .708l-11 11a.5.5 0 0 1-.708-.708l11-11a.5.5 0 0 1 .708 0Z" fill="#000"/>
                <path fill-rule="evenodd" clip-rule="evenodd" d="M2.146 2.146a.5.5 0 0 0 0 .708l11 11a.5.5 0 0 0 .708-.708l-11-11a.5.5 0 0 0-.708 0Z" fill="#000"/>
            </svg></span>
            </span>
        </div>
        <div class="modal-body">
            <p class='text-m bold'>
                ì´ ë§í¬ëŠ” ì €ì˜ ì¿ íŒ¡ íŒŒíŠ¸ë„ˆìŠ¤ í™œë™ì˜ ì¼í™˜ì…ë‹ˆë‹¤. <br>ê·¸ëŸ°ë° ì‚¬ì‹¤, ì´ì™•ì´ë©´ êµë³´ë¬¸ê³ ì— ê°€ì„œ ì±… ëƒ„ìƒˆ ë§¡ìœ¼ë©° êµ¬ë§¤í•˜ëŠ” ê±¸ ë” ì¶”ì²œí•˜ê¸´ í•´ìš”ğŸ˜
            </p>
            <p class="text-s italic">
                "ì´ í¬ìŠ¤íŒ…ì€ ì¿ íŒ¡ íŒŒíŠ¸ë„ˆìŠ¤ í™œë™ì˜ ì¼í™˜ìœ¼ë¡œ, ì´ì— ë”°ë¥¸ ì¼ì •ì•¡ì˜ ìˆ˜ìˆ˜ë£Œë¥¼ ì œê³µë°›ìŠµë‹ˆë‹¤."
            </p>
        </div>
        <div class="modal-footer center">
            <button type="button" class="btn btn-secondary" onclick="location.href='{{book.url}}'" data-dismiss="modal">ğŸš€ êµ¬ë§¤í•˜ê¸°</button>
        </div>
    </div>
    </div>
</div>

<!-- êµ¬ë… ì–‘ì‹ -->
<div class="row-h-40"></div>
<div class="bottom-border"></div>
<div class="row-h-20"></div>
<div class="row justify-content-center">
    <div class="col center">
        <div class="text-medium text-black">ë§¤ì£¼ ë– ë¨¹ì—¬ ì¤„ ì‚¬ëŒì´ í•„ìš”í•œê°€ìš”? <br class="mobile-only"/>ì œê°€ í•˜ì£  ë­.</div>
    </div>
</div>
<div class="row justify-content-center">
    <div class="col-10 col-md-5 center">
        <form action="https://stibee.com/api/v1.0/lists/9itYVXH3Nm4N-Ec-vhovThxj9qMh1w==/public/subscribers" method="POST" target="_blank" accept-charset="utf-8"  name="stb_subscribe_form" id="stb_subscribe_form" novalidate="">
            <input type="text" placeholder="ì´ë¦„" class="form-control" id="stb_name" name="name"/>
            <input type="email" placeholder="ê°€ì¥ ì•„ë¼ëŠ” ì´ë©”ì¼ ì£¼ì†Œ" class="form-control" id="stb_email" name="email"/>
            <div class="text-small text-black">â— Gmailì´ <span class="bold">ì•„ë‹Œ</span> ì´ë©”ì¼ ì£¼ì†Œë¥¼ ê°•ë ¥íˆ ê¶Œì¥ë“œë¦½ë‹ˆë‹¤.</div>
            <br/>
            <button type="submit" class="btn btn-subscribe" id="stb_form_submit_button" onClick={this._openModal}>ë¬´ë£Œë¡œ êµ¬ë… ğŸ“®</button>
            <div class="stb_form_msg_error" id="stb_email_error"></div>
            <div class="stb_form_result" id="stb_form_result"></div>
        </form>
    </div>
</div>
<div class="row-h-40"></div>

<script>
    function PurchaseModal() {
        $('#purchase-modal').modal()
    }

</script>
{% endblock %}